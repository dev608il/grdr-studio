<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ˆì´í˜ì´ì§€ - GRDR STUDIO</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; color: #333; }
        
        /* í—¤ë” (ë©”ì¸ í˜ì´ì§€ì™€ ë™ì¼) */
        header { background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: fixed; width: 100%; top: 0; z-index: 1000; }
        .header-top { background: #f8f9fa; padding: 8px 0; font-size: 12px; text-align: center; color: #666; }
        .header-main { padding: 15px 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 28px; font-weight: bold; color: #ff6b6b; text-decoration: none; }
        .search-bar { flex: 1; max-width: 400px; margin: 0 40px; position: relative; }
        .search-bar input { width: 100%; padding: 12px 50px 12px 20px; border: 2px solid #e9ecef; border-radius: 25px; font-size: 14px; outline: none; }
        .search-btn { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #666; cursor: pointer; }
        .header-icons { display: flex; gap: 20px; align-items: center; }
        .icon-btn { background: none; border: none; font-size: 20px; cursor: pointer; color: #666; }
        
        /* ë©”ì¸ ì»¨í…ì¸  */
        main { margin-top: 100px; padding: 40px 0; min-height: 70vh; }
        .mypage-container { display: grid; grid-template-columns: 250px 1fr; gap: 30px; }
        
        /* ì‚¬ì´ë“œë°” */
        .mypage-sidebar { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); height: fit-content; }
        .user-info { text-align: center; padding-bottom: 20px; border-bottom: 1px solid #e9ecef; margin-bottom: 20px; }
        .user-avatar { width: 80px; height: 80px; background: linear-gradient(45deg, #ff6b6b, #ffa8a8); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; margin: 0 auto 15px; }
        .user-name { font-size: 18px; font-weight: 600; margin-bottom: 5px; }
        .user-email { font-size: 14px; color: #666; }
        
        .mypage-menu { list-style: none; }
        .mypage-menu li { margin-bottom: 5px; }
        .mypage-menu a { display: block; padding: 12px 15px; text-decoration: none; color: #333; border-radius: 8px; transition: background 0.3s; }
        .mypage-menu a:hover, .mypage-menu a.active { background: #ff6b6b; color: white; }
        
        /* ë©”ì¸ ì»¨í…ì¸  */
        .mypage-content { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .section-title { font-size: 24px; margin-bottom: 20px; color: #2c3e50; border-bottom: 2px solid #ff6b6b; padding-bottom: 10px; }
        
        /* í”„ë¡œí•„ ìˆ˜ì • */
        .profile-form { max-width: 600px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #2c3e50; }
        .form-control { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; }
        .form-control:focus { outline: none; border-color: #ff6b6b; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .btn-primary { background: #ff6b6b; color: white; }
        .btn-primary:hover { background: #ff5252; }
        .btn-secondary { background: #6c757d; color: white; margin-left: 10px; }
        
        /* ì£¼ë¬¸ ë‚´ì—­ */
        .order-list { margin-top: 20px; }
        .order-item { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 15px; border-left: 4px solid #ff6b6b; }
        .order-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .order-number { font-weight: 600; color: #2c3e50; }
        .order-date { color: #666; font-size: 14px; }
        .order-status { padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; }
        .status-completed { background: #d4edda; color: #155724; }
        .status-processing { background: #cce5ff; color: #004085; }
        .status-pending { background: #fff3cd; color: #856404; }
        
        .order-products { margin-bottom: 15px; }
        .order-product { display: flex; align-items: center; gap: 15px; margin-bottom: 10px; }
        .product-image { width: 60px; height: 60px; background: linear-gradient(45deg, #a8edea, #fed6e3); border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .product-info h4 { font-size: 14px; margin-bottom: 5px; }
        .product-info p { font-size: 12px; color: #666; }
        
        .order-total { text-align: right; font-size: 16px; font-weight: 600; color: #ff6b6b; }
        
        /* í†µê³„ ì¹´ë“œ */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: linear-gradient(45deg, #667eea, #764ba2); color: white; padding: 25px; border-radius: 15px; text-align: center; }
        .stat-number { font-size: 32px; font-weight: 700; margin-bottom: 5px; }
        .stat-label { font-size: 14px; opacity: 0.9; }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .mypage-container { grid-template-columns: 1fr; }
            .mypage-sidebar { order: 2; }
            .mypage-content { order: 1; }
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header>
        <div class="header-top">ğŸ‰ ì‹ ê·œ íšŒì› ê°€ì…ì‹œ 10% í• ì¸ ì¿ í° ì¦ì •! ë¬´ë£Œë°°ì†¡ ì´ë²¤íŠ¸ ì§„í–‰ì¤‘ ğŸ‰</div>
        <div class="header-main">
            <div class="container">
                <div class="header-content">
                    <a href="index.html" class="logo">GRDR STUDIO</a>
                    <div class="search-bar">
                        <input type="text" placeholder="ì›í•˜ëŠ” ìƒí’ˆì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”">
                        <button class="search-btn">ğŸ”</button>
                    </div>
                    <div class="header-icons">
                        <button class="icon-btn" onclick="window.location.href='mypage.html'">ğŸ‘¤</button>
                        <button class="icon-btn">â¤ï¸</button>
                        <button class="icon-btn" onclick="window.location.href='cart.html'">ğŸ›’</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main>
        <div class="container">
            <div class="mypage-container">
                <!-- ì‚¬ì´ë“œë°” -->
                <div class="mypage-sidebar">
                    <div class="user-info">
                        <div class="user-avatar">ğŸ‘¤</div>
                        <div class="user-name" id="userName">ì‚¬ìš©ì</div>
                        <div class="user-email" id="userEmail">user@email.com</div>
                    </div>
                    <ul class="mypage-menu">
                        <li><a href="#dashboard" class="menu-link active" data-section="dashboard">ëŒ€ì‹œë³´ë“œ</a></li>
                        <li><a href="#profile" class="menu-link" data-section="profile">í”„ë¡œí•„ ìˆ˜ì •</a></li>
                        <li><a href="#orders" class="menu-link" data-section="orders">ì£¼ë¬¸ ë‚´ì—­</a></li>
                        <li><a href="#wishlist" class="menu-link" data-section="wishlist">ì°œí•œ ìƒí’ˆ</a></li>
                        <li><a href="#reviews" class="menu-link" data-section="reviews">ë‚´ ë¦¬ë·°</a></li>
                        <li><a href="#inquiries" class="menu-link" data-section="inquiries">ë¬¸ì˜ ë‚´ì—­</a></li>
                        <li><a href="#" onclick="logout()" style="color: #dc3545;">ë¡œê·¸ì•„ì›ƒ</a></li>
                    </ul>
                </div>

                <!-- ë©”ì¸ ì»¨í…ì¸  -->
                <div class="mypage-content">
                    <!-- ëŒ€ì‹œë³´ë“œ -->
                    <div id="dashboard" class="content-section active">
                        <h2 class="section-title">ëŒ€ì‹œë³´ë“œ</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number" id="totalOrders">0</div>
                                <div class="stat-label">ì´ ì£¼ë¬¸ ìˆ˜</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="totalSpent">â‚©0</div>
                                <div class="stat-label">ì´ êµ¬ë§¤ ê¸ˆì•¡</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="totalReviews">0</div>
                                <div class="stat-label">ì‘ì„±í•œ ë¦¬ë·°</div>
                            </div>
                        </div>
                        
                        <h3 style="margin-bottom: 20px;">ìµœê·¼ ì£¼ë¬¸</h3>
                        <div id="recentOrders">
                            <p style="text-align: center; color: #666; padding: 40px;">ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>

                    <!-- í”„ë¡œí•„ ìˆ˜ì • -->
                    <div id="profile" class="content-section">
                        <h2 class="section-title">í”„ë¡œí•„ ìˆ˜ì •</h2>
                        <form class="profile-form" id="profileForm">
                            <div class="form-group">
                                <label for="profileName">ì´ë¦„</label>
                                <input type="text" id="profileName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="profileEmail">ì´ë©”ì¼</label>
                                <input type="email" id="profileEmail" class="form-control" readonly style="background: #f8f9fa;">
                            </div>
                            <div class="form-group">
                                <label for="profilePhone">íœ´ëŒ€í° ë²ˆí˜¸</label>
                                <input type="tel" id="profilePhone" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="profileAddress">ì£¼ì†Œ</label>
                                <input type="text" id="profileAddress" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="currentPassword">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                                <input type="password" id="currentPassword" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì‹œì—ë§Œ ì…ë ¥">
                            </div>
                            <div class="form-group">
                                <label for="newPassword">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                                <input type="password" id="newPassword" class="form-control" placeholder="ë³€ê²½í•  ë¹„ë°€ë²ˆí˜¸ (8ì ì´ìƒ)">
                            </div>
                            <div class="form-group">
                                <label for="confirmNewPassword">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                                <input type="password" id="confirmNewPassword" class="form-control" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥">
                            </div>
                            <button type="submit" class="btn btn-primary">í”„ë¡œí•„ ìˆ˜ì •</button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm()">ì·¨ì†Œ</button>
                        </form>
                    </div>

                    <!-- ì£¼ë¬¸ ë‚´ì—­ -->
                    <div id="orders" class="content-section">
                        <h2 class="section-title">ì£¼ë¬¸ ë‚´ì—­</h2>
                        <div class="order-list" id="orderList">
                            <p style="text-align: center; color: #666; padding: 40px;">ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>
                                        <!-- ì°œí•œ ìƒí’ˆ -->
                    <div id="wishlist" class="content-section">
                        <h2 class="section-title">ì°œí•œ ìƒí’ˆ</h2>
                        <div id="wishlistItems">
                            <p style="text-align: center; color: #666; padding: 40px;">ì°œí•œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>

                    <!-- ë‚´ ë¦¬ë·° -->
                    <div id="reviews" class="content-section">
                        <h2 class="section-title">ë‚´ ë¦¬ë·°</h2>
                        <div id="myReviews">
                            <p style="text-align: center; color: #666; padding: 40px;">ì‘ì„±í•œ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>

                    <!-- ë¬¸ì˜ ë‚´ì—­ -->
                    <div id="inquiries" class="content-section">
                        <h2 class="section-title">ë¬¸ì˜ ë‚´ì—­</h2>
                        <div id="myInquiries">
                            <p style="text-align: center; color: #666; padding: 40px;">ë¬¸ì˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // ë¡œê·¸ì¸ ì²´í¬
        if (!sessionStorage.getItem('userLoggedIn')) {
            alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
            sessionStorage.setItem('returnUrl', 'mypage.html');
            window.location.href = 'login.html';
        }

        const currentUser = JSON.parse(sessionStorage.getItem('currentUser') || '{}');
        const users = JSON.parse(localStorage.getItem('users')) || [];

        document.addEventListener('DOMContentLoaded', function() {
            loadUserInfo();
            setupMenuEvents();
            loadDashboard();
        });

        function loadUserInfo() {
            const user = users.find(u => u.id === currentUser.id);
            if (user) {
                document.getElementById('userName').textContent = user.name;
                document.getElementById('userEmail').textContent = user.email;
                
                // í”„ë¡œí•„ í¼ì— ë°ì´í„° ì±„ìš°ê¸°
                document.getElementById('profileName').value = user.name;
                document.getElementById('profileEmail').value = user.email;
                document.getElementById('profilePhone').value = user.phone || '';
                document.getElementById('profileAddress').value = user.address || '';
            }
        }

        function setupMenuEvents() {
            const menuLinks = document.querySelectorAll('.menu-link');
            const contentSections = document.querySelectorAll('.content-section');

            menuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    menuLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    contentSections.forEach(section => section.classList.remove('active'));
                    
                    const targetSection = this.getAttribute('data-section');
                    const targetElement = document.getElementById(targetSection);
                    if (targetElement) {
                        targetElement.classList.add('active');
                        
                        // ê° ì„¹ì…˜ë³„ ë°ì´í„° ë¡œë”©
                        if (targetSection === 'orders') {
                            loadOrders();
                        } else if (targetSection === 'reviews') {
                            loadMyReviews();
                        }
                    }
                });
            });
        }

        function loadDashboard() {
            // ì„ì‹œ ë°ì´í„° (ì‹¤ì œë¡œëŠ” ì£¼ë¬¸ ë°ì´í„°ì—ì„œ ê³„ì‚°)
            document.getElementById('totalOrders').textContent = '3';
            document.getElementById('totalSpent').textContent = 'â‚©67,000';
            document.getElementById('totalReviews').textContent = '2';
        }

        function loadOrders() {
            // ì„ì‹œ ì£¼ë¬¸ ë°ì´í„°
            const orderList = document.getElementById('orderList');
            orderList.innerHTML = `
                <div class="order-item">
                    <div class="order-header">
                        <span class="order-number">ì£¼ë¬¸ë²ˆí˜¸: #ORD001</span>
                        <span class="order-date">2024-01-15</span>
                        <span class="order-status status-completed">ë°°ì†¡ì™„ë£Œ</span>
                    </div>
                    <div class="order-products">
                        <div class="order-product">
                            <div class="product-image">ğŸ“¦</div>
                            <div class="product-info">
                                <h4>ê·€ì—¬ìš´ ê³ ì–‘ì´ ìŠ¤í‹°ì»¤ ì„¸íŠ¸</h4>
                                <p>ìˆ˜ëŸ‰: 2ê°œ</p>
                            </div>
                        </div>
                    </div>
                    <div class="order-total">ì´ ê²°ì œê¸ˆì•¡: â‚©30,000</div>
                </div>
            `;
        }

        function loadMyReviews() {
            const myReviews = document.getElementById('myReviews');
            myReviews.innerHTML = `
                <div style="border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <strong>ê·€ì—¬ìš´ ê³ ì–‘ì´ ìŠ¤í‹°ì»¤ ì„¸íŠ¸</strong>
                        <span style="color: #ff6b6b;">â­â­â­â­â­</span>
                    </div>
                    <p style="color: #666; margin-bottom: 10px;">ì •ë§ ê·€ì—½ê³  í’ˆì§ˆë„ ì¢‹ì•„ìš”! ë‹¤ì´ì–´ë¦¬ ê¾¸ë¯¸ê¸°ì— ë”± ì¢‹ë„¤ìš” ğŸ˜Š</p>
                    <small style="color: #999;">2024-01-15 ì‘ì„±</small>
                </div>
            `;
        }

        // í”„ë¡œí•„ ìˆ˜ì •
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex === -1) return;
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;
            
            // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì²´í¬
            if (newPassword) {
                if (!currentPassword) {
                    alert('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                if (users[userIndex].password !== currentPassword) {
                    alert('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                    return;
                }
                if (newPassword.length < 8) {
                    alert('ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                    return;
                }
                if (newPassword !== confirmNewPassword) {
                    alert('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                    return;
                }
                users[userIndex].password = newPassword;
            }
            
            // í”„ë¡œí•„ ì •ë³´ ì—…ë°ì´íŠ¸
            users[userIndex].name = document.getElementById('profileName').value;
            users[userIndex].phone = document.getElementById('profilePhone').value;
            users[userIndex].address = document.getElementById('profileAddress').value;
            
            localStorage.setItem('users', JSON.stringify(users));
            
            // í˜„ì¬ ì‚¬ìš©ì ì„¸ì…˜ ì •ë³´ë„ ì—…ë°ì´íŠ¸
            currentUser.name = users[userIndex].name;
            sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            alert('í”„ë¡œí•„ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
            loadUserInfo();
            resetForm();
        });

        function resetForm() {
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
        }

        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                sessionStorage.removeItem('userLoggedIn');
                sessionStorage.removeItem('currentUser');
                alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>

